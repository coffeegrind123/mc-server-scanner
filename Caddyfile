{
	# Global options
	admin off
}

# Production configuration with your domain (replace with actual domain)
# Uncomment and modify this block for production:
# yourdomain.com {
#     reverse_proxy web:3000
#     
#     header {
#         Strict-Transport-Security max-age=31536000
#         X-Content-Type-Options nosniff
#         X-XSS-Protection "1; mode=block"
#         X-Frame-Options DENY
#         -Server
#     }
#     
#     log {
#         output stdout
#         format console
#     }
# }

# Development/Local configuration (HTTP only)
:80 {
	# Automatic HTTPS redirect disabled for local development
	reverse_proxy web:3000 {
		header_up Host {http.request.host}
		header_up X-Real-IP {http.request.remote.host}
		header_up X-Forwarded-For {http.request.remote.host}
		header_up X-Forwarded-Proto {http.request.scheme}
	}

	# Add security headers (even for development)
	header {
		X-Content-Type-Options nosniff
		X-XSS-Protection "1; mode=block"
		X-Frame-Options DENY
		-Server
	}

	# Logging
	log {
		output stdout
		format console
	}
}